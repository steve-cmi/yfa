<% javascript 'admin.js' %>
<h1>Events Dashboard</h1>

<h3>Manage Events</h3>
<div class="grid row">

  <div class="col-md-12">
    <form method="get" action="<%= edit_event_path('slug') %>" class="form-horizontal auto-slug">
      <div class="form-group">
        <div class="col-sm-9 col-sm-offset-1">
          <%= select_tag nil, options_from_collection_for_select(@events, :slug, :name), :class => "form-control" %>
        </div>
        <div class="col-sm-2">
          <button type="submit" class="btn btn-default">Edit</button>
        </div>
      </div>
    </form>

    <%= form_for(:event, :url => event_path("slug"), :html => {:method => :delete, :class => "form-horizontal auto-slug"}) do  %>
      <div class="form-group">
        <div class="col-sm-9 col-sm-offset-1">
          <%= select_tag nil, options_from_collection_for_select(@events, :slug, :name), :class => "form-control" %>
        </div>
        <div class="col-sm-2">
          <button type="submit" class="btn btn-default" onClick="return confirm('Are you sure you want to delete the selected event?')">Delete</button>
        </div>
      </div>
    <% end %>
    
  </div>
  
</div>

<div class="grid row">

  <div class="col-md-12">
    <h3>Filters</h3>
    <% @filters.each do |filter| -%>
      <%= form_for filter, :remote => true, :html => {:class => "alert-on-error"} do |f| -%>
        <div class="row">
          <div class="col-md-2">
            <%= link_to "&times;".html_safe, filter_path(filter), :method => :delete, :class => "btn btn-danger", :confirm => "This will permanently delete this filter. There is no undo. Are you sure?" %>
          </div>
          <div class="col-md-10">
            <%= f.text_field :name, :class => "form-control", :onChange => "$(this).closest('form').submit()" %>
          </div>
        </div>
        <br />
      <% end -%>
    <% end -%>
    <%= form_for Filter.new, :html => {:class => "alert-on-error"} do |f| -%>
      <div class="row">
        <div class="col-md-2">
          <button type="submit" class="btn btn-primary">+</button>
        </div>
        <div class="col-md-10">
          <%= f.text_field :name, :class => "form-control", :placeholder => "Filter" %>
        </div>
      </div>
    <% end -%>
  </div>

</div>
